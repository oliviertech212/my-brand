



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>admin-add Post</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/admin.css">
    <!-- fontawersome -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- <script src="https://kit.fontawesome.com/6eef1430d0.js" crossorigin="anonymous"></script>  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <!-- google font robot Alconica -->
    <!-- <link href="https://fonts.googleapis.com/css2?family=Aclonica&family=Roboto&family=Rubik:wght@400;800&display=swap" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=Aclonica&family=Alegreya+Sans&family=Roboto&family=Rubik:wght@400;800&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <nav>
            <a href="./index.html">
                <img class="logo" src="../../images/logo.png" alt="">
            </a>
            <button id="menuicon" class="menu-btn">
                <i class="fa-sharp fa-solid fa-bars"></i>
            </button>
            <ul class="nav-links">
                <li><a href="./pages/login.html">
                    <!-- <button>Logout </button> -->
                    <i class="fa-solid fa-user"></i>
                    admin
                    <!-- <span>
                        <i class="fa-sharp fa-solid fa-chevron-down"></i>
                    </span> -->
                </a></li>
            </ul>
        </nav>
       
    </header>
   

    <!-- admin page section -->
    <section  class="admin-home ">
        <div id="bordmenu" class="left-sidebar">
            <ul>
                <li>
                    <a href="../../index.html"><h1>Home</h1></a>
                    <a href="./profile.html">Reset</a>
                    <a href="./index.html">Manage Posts</a>
                    <!-- <a href="../user/index.html">Manage Users</a>
                    <a href="../topics/index.html">Manage Topics</a> -->
                </li>
            </ul>
            

        </div>
        <div id="mainmenu" class="left-sidebar">
            <ul>
                <li>
                    <a href="../../index.html"><h1>Home</h1></a>
                    <a href="./profile.html">Reset</a>
                    <a href="./index.html">Manage Posts</a>
                </li>
            </ul>
            

        </div>
      
        <div class="admin-content">
            <div class="btn-group">
                <a href="./create.html" class="btn" >Add Post</a>
                <a href="./index.html" class="btn" >Manage Posts</a>
            </div>



            <div class="content">
                <h1 class="page-title" >Manage Posts</h1> 

                <form id="blogform" autocomplete="off" action="" >
                    
                </form>

                </div>
            </div>
            
        </div>

    </section>




    <script>
        // localStorage.clear()
        // tinymce.init({
        //   selector: '#blog-editor'
        // });
    
        // form rorblogpost
    const form2=document.getElementById("blogform");
    const blogtitle=document.getElementById("blogtitl");
    const blogimage=document.getElementById("blogimag");
    const blogdate=document.getElementById("blogdat");
    const blogcontent=document.getElementById("blog-edito");
    const btn=document.getElementById("btn");
    
    
    
    
    
    const validateinputs=()=>{
       
        // blogpost content
        // const blogimagevalue=`<img src=${URL.createObjectURL(blogimage)}>`;


        // const blogimagevalue= blogimage;
        // const blogtitlevalue= blogtitle;
        // const blogcontentvalue= blogcontent;
        // const blogdatevalue=blogdate;
    
        // let blog={
        //     blogcontent:blogcontentvalue,
        //     blogdate:blogdatevalue,
        //     blogimage:blogimagevalue,
        //     blogtitle:blogtitlevalue
        // };
       
    
        // if (blogtitlevalue==="") {
        //     seterror(blogtitle,"please blog must contain title");
            
        // } else {
        //     setsuccess(blogtitle)
        // }
    
        // if (blogdatevalue==="") {
        //     seterror(blogdate,"please blog must contain date");
        // } else {
        //     setsuccess(blogdate)
        // }
    
        // if (blogtitlevalue===""||blogimagevalue==null) {
        //     seterror(blogimage,"please choose image for blog");
            
        // } else {
        //     console.log(blogimagevalue);
        //     setsuccess(blogimage)
        // }
    
        // if (blogcontentvalue==="") {
        //     seterror(blogcontent,"write body content");
            
        // } else {
        //     setsuccess(blogcontent)
        // }
    
        
     // if nothing saved in local storage
     if(localStorage.getItem("blogs")==null){
            localStorage.setItem("blogs","[]");
     }else{
         let old_data=JSON.parse(localStorage.getItem("blogs"));
        //  if((blogcontentvalue && blogimagevalue && blogtitlevalue && blogdatevalue)!==''){
        //     old_data.push(blog);
        // }
      
        // save the old+new dat to local storage
        localStorage.setItem("blogs",JSON.stringify(old_data))
        // localStorage.clear()
        let arr=JSON.parse(localStorage.getItem("blogs"))
        console.log(arr)
        // arr.forEach(blog => {
        //     // console.log(JSON.parse(blog));
        // });
        
        
     }
    }
    
    let button;
    
    if(localStorage.getItem("blogs")!==null){
        
        let arr=JSON.parse(localStorage.getItem("blogs"))
        arr.forEach((blog, index) => {
           
           console.log(index)
        //    console.log(singleObject)
          function edit(index){
            let display= document.getElementById("blogform");
            display.innerHTML=(`
                        <div>
                            <label class="text-label">Title</label>
                            <input id="blogtitl" type="text" name="title"value=${blog.blogtitle} class="text-input">
                            <p class="error"></p>
                        </div>
                        <div>
                            <label class="text-label">Date</label>
                    
                            <input id="blogdat" type="date" name="title" value=${blog.blogdate}   class="text-input">
                            <p class="error"></p>
                        </div>
                        <div>
                            <label class="text-label">image</label>
                         
                            <input id="blogimag" type="file"  value=${blog.blogimage}  name="title" >
                            <p class="error"></p>
                        </div>
                        
    
                        <div>
                            <label class="text-label">Content</label>
                            <br>
                            <textarea   name="" id="blog-edito" value=${blog.blogcontent}  cols="30" rows="10"></textarea>
                            <p class="error"></p>
                        </div>
    
                        <div>
                            <button type="submit" id="btn" onclick="${update(index)}"   class="btn-sub">UPDATE</button>
                        </div>
                   
    
                             `);
          }edit()
            function update(index) {
                validateinputs();
                const blogtitle=document.getElementById("blogtitl");
                const blogimage=document.getElementById("blogimag");
                const blogdate=document.getElementById("blogdat");
                const blogcontent=document.getElementById("blog-edito");
                const btn=document.getElementById("btn");
      
            blog={
            blogcontent:blogcontent,
            blogdate:blogdate,
            blogimage:blogimage,
            blogtitle:blogtitle
            };
            console.log(arr);
       
        //   localStorage.setItem("blogs",JSON.stringify(arr));
        //   document.getElementById("").innerHTML = form;
        }
    
        });
        
    }
    </script>
    

<!-- script -->
<script src="../../js/script.js"></script>
    
</body>
</html>